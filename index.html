---
layout: default
title: In√≠cio
---

<style>
.period-btn {
  font-size: 0.75rem;
  padding: 0.375rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
  background-color: #ffffff;
  color: #374151;
  transition: background-color 0.2s, color 0.2s, border-color 0.2s;
}

.period-btn:hover {
  background-color: #f9fafb;
}

.period-btn.active {
  background-color: #2563eb;
  color: #ffffff;
  border-color: #2563eb;
}

.period-btn.active:hover {
  background-color: #1d4ed8;
}

/* Dark mode styles */
.dark .period-btn {
  border-color: #4b5563;
  background-color: #374151;
  color: #d1d5db;
}

.dark .period-btn:hover {
  background-color: #4b5563;
}

.dark .period-btn.active {
  background-color: #2563eb;
  color: #ffffff;
  border-color: #2563eb;
}

.dark .period-btn.active:hover {
  background-color: #1d4ed8;
}
</style>

<div class="w-full overflow-x-hidden">
  <div class="chart-container w-full bg-white p-4 shadow-lg dark:bg-gray-700" id="chart-container">
    <div id="loading-indicator" class="hidden py-12 text-center">
      <div class="inline-block h-8 w-8 animate-spin rounded-full border-b-2 border-blue-600"></div>
      <p class="mt-2 text-gray-600 dark:text-gray-200">Carregando dados...</p>
    </div>
    <canvas id="chart" class="h-full w-full"></canvas>
  </div>
  
  <!-- Time Range Controls -->
  <div class="mt-4 mb-4 bg-gray-50 border border-gray-200 rounded-lg p-4 dark:bg-gray-800 dark:border-gray-600" id="time-range-controls">
    <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">üìÖ Filtros de Per√≠odo</div>
    
    <!-- Government Periods -->
    <div class="mb-3">
      <div class="text-xs font-medium text-gray-600 dark:text-gray-400 mb-2">Por Governo:</div>
      <div class="flex flex-wrap gap-2">
        <button class="period-btn" data-start="1995-01-01" data-end="2003-01-01" data-label="FHC">FHC (1995-2002)</button>
        <button class="period-btn" data-start="2003-01-01" data-end="2011-01-01" data-label="Lula I">Lula (2003-2010)</button>
        <button class="period-btn" data-start="2011-01-01" data-end="2016-08-01" data-label="Dilma">Dilma (2011-2016)</button>
        <button class="period-btn" data-start="2016-08-01" data-end="2019-01-01" data-label="Temer">Temer (2016-2018)</button>
        <button class="period-btn" data-start="2019-01-01" data-end="2023-01-01" data-label="Bolsonaro">Bolsonaro (2019-2022)</button>
        <button class="period-btn" data-start="2023-01-01" data-end="2025-12-31" data-label="Lula II">Lula II (2023-atual)</button>
      </div>
    </div>
    
    <!-- Quick Periods -->
    <div class="mb-3">
      <div class="text-xs font-medium text-gray-600 dark:text-gray-400 mb-2">Per√≠odos R√°pidos:</div>
      <div class="flex flex-wrap gap-2">
        <button class="period-btn" data-years="1" data-label="√öltimo ano">√öltimo ano</button>
        <button class="period-btn" data-years="3" data-label="√öltimos 3 anos">√öltimos 3 anos</button>
        <button class="period-btn" data-years="5" data-label="√öltimos 5 anos">√öltimos 5 anos</button>
        <button class="period-btn" data-years="10" data-label="√öltimos 10 anos">√öltimos 10 anos</button>
        <button class="period-btn active" data-reset="true" data-label="Todo o per√≠odo">Todo o per√≠odo</button>
      </div>
    </div>
    
    <!-- Custom Year Range -->
    <div class="mb-3">
      <div class="text-xs font-medium text-gray-600 dark:text-gray-400 mb-2">Per√≠odo Personalizado:</div>
      <div class="flex items-center gap-3">
        <div class="flex items-center gap-2">
          <label for="start-year" class="text-xs text-gray-600 dark:text-gray-400">De:</label>
          <select id="start-year" class="text-xs border border-gray-300 rounded px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">
            <!-- Years will be populated by JavaScript -->
          </select>
        </div>
        <div class="flex items-center gap-2">
          <label for="end-year" class="text-xs text-gray-600 dark:text-gray-400">At√©:</label>
          <select id="end-year" class="text-xs border border-gray-300 rounded px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">
            <!-- Years will be populated by JavaScript -->
          </select>
        </div>
        <button id="apply-custom-range" class="text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors">Aplicar</button>
      </div>
    </div>
  </div>
  
  <div class="mt-3 mb-4 text-center">
    <p id="data-source" class="text-sm">
      <span class="font-medium">Fonte(s):</span> <span id="source-name">Banco Central do Brasil</span>
    </p>
    <div class="mt-4">
      <button
        id="share-url-btn"
        class="inline-flex items-center rounded-md border border-gray-300 bg-gray-100 px-3 py-1.5 text-xs font-medium text-gray-600 transition-colors duration-200 hover:bg-gray-200 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-300 dark:hover:bg-gray-500"
        title="Copiar URL para compartilhar sele√ß√£o atual"
      >
        <svg class="mr-1.5 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
        </svg>
        Copiar link
      </button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  setupTimePeriodFilters();
});

function setupTimePeriodFilters() {
  const periodButtons = document.querySelectorAll('.period-btn');
  const fromYearSelect = document.getElementById('start-year');
  const toYearSelect = document.getElementById('end-year');
  const applyCustomBtn = document.getElementById('apply-custom-range');
  
  // Popular os seletores de ano
  populateYearSelectors();
  
  // Event listeners para bot√µes de per√≠odo
  periodButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Remove active de todos os bot√µes
      periodButtons.forEach(btn => btn.classList.remove('active'));
      
      // Adiciona active no bot√£o clicado
      this.classList.add('active');
      
      if (this.dataset.reset) {
        // Todo o per√≠odo
        resetDateFilter();
      } else if (this.dataset.years) {
        // Per√≠odo relativo (√∫ltimos X anos)
        applyRelativePeriod(parseInt(this.dataset.years));
      } else if (this.dataset.start && this.dataset.end) {
        // Per√≠odo espec√≠fico (governos)
        applyDateRange(this.dataset.start, this.dataset.end);
        
        // Update URL with government period label
        if (window.chartIntegration) {
          window.chartIntegration.updateTimeRangeURL(null, null, this.dataset.label);
        }
      }
      
      updateChart();
    });
  });
  
  // Event listener para per√≠odo customizado
  if (applyCustomBtn) {
    applyCustomBtn.addEventListener('click', function() {
      const fromYear = fromYearSelect.value;
      const toYear = toYearSelect.value;
      
      if (fromYear && toYear && parseInt(fromYear) <= parseInt(toYear)) {
        // Remove active de todos os bot√µes de per√≠odo
        periodButtons.forEach(btn => btn.classList.remove('active'));
        
        applyDateRange(`${fromYear}-01-01`, `${toYear}-12-31`);
        updateChart();
      }
    });
  }
}

function populateYearSelectors() {
  const fromYearSelect = document.getElementById('start-year');
  const toYearSelect = document.getElementById('end-year');
  const currentYear = new Date().getFullYear();
  const startYear = 1994; // In√≠cio do Plano Real
  
  // Verificar se os elementos existem antes de popular
  if (!fromYearSelect || !toYearSelect) {
    console.warn('Year selectors not found in DOM');
    return;
  }
  
  // Popular seletores com anos de 1994 at√© ano atual
  for (let year = startYear; year <= currentYear; year++) {
    const option1 = new Option(year, year);
    const option2 = new Option(year, year);
    fromYearSelect.appendChild(option1);
    toYearSelect.appendChild(option2);
  }
  
  // Definir valores padr√£o
  fromYearSelect.value = startYear;
  toYearSelect.value = currentYear;
}

function resetDateFilter() {
  // Reset time filter by recreating chart with all data
  if (window.chartIntegration) {
    window.chartIntegration.applyTimeFilter(null, null);
  }
  
  // Update URL
  if (window.chartIntegration) {
    window.chartIntegration.updateTimeRangeURL(null, null, 'Todo o per√≠odo');
  }
}

function applyRelativePeriod(years) {
  const endDate = new Date();
  const startDate = new Date();
  startDate.setFullYear(endDate.getFullYear() - years);
  
  const startDateStr = startDate.toISOString().split('T')[0];
  const endDateStr = endDate.toISOString().split('T')[0];
  
  applyDateRange(startDateStr, endDateStr);
  
  // Update URL with period info
  if (window.chartIntegration) {
    window.chartIntegration.updateTimeRangeURL(null, null, `√öltimos ${years} anos`);
  }
}

function applyDateRange(startDate, endDate) {
  // Apply time filter by recreating chart with filtered data
  if (window.chartIntegration) {
    window.chartIntegration.applyTimeFilter(startDate, endDate);
  }
  
  // Update URL with date range
  if (window.chartIntegration) {
    window.chartIntegration.updateTimeRangeURL(startDate, endDate);
  }
}

function updateChart() {
  const chart = window.chartInstance || (window.chartManager && window.chartManager.chart);
  
  if (chart) {
    chart.update('none');
  }
}
</script>
