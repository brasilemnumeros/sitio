---
layout: default
---
<!-- Post Header -->
<header class="mb-8">
  <h1 class="mb-4 text-4xl font-bold text-gray-900 dark:text-gray-100">{{ page.title }}</h1>

  <div class="mb-4 flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400">
    <time datetime="{{ page.date | date_to_xmlschema }}">
      {{ page.date | date: '%d de %B de %Y' }}
    </time>

    {% if page.categories %}
      {% for category in page.categories %}
        <a
          href="/categorias/{{ category }}.html"
          class="inline-flex items-center gap-1 rounded-md bg-gray-100 px-2 py-1 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700"
        >
          {% case category %}
            {% when 'analises' %}
              📊 <span>Análise</span>
            {% when 'indicadores' %}
              📈 <span>Indicador</span>
            {% when 'noticias' %}
              📢 <span>Notícia</span>
            {% else %}
              🏷️ <span>{{ category | capitalize }}</span>
          {% endcase %}
        </a>
      {% endfor %}
    {% endif %}

    {% if page.audio %}
      <span class="inline-flex items-center gap-1 rounded-md bg-blue-100 px-2 py-1 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
        🎧 <span>Podcast disponível</span>
      </span>
    {% endif %}
  </div>

  {% if page.tags %}
    <div class="mb-4 flex flex-wrap gap-2">
      {% for tag in page.tags %}
        <span class="inline-block rounded-md bg-gray-100 px-2 py-1 text-xs text-gray-700 dark:bg-gray-800 dark:text-gray-300">
          #{{ tag }}
        </span>
      {% endfor %}
    </div>
  {% endif %}
</header>

{% if page.audio %}
  <!-- Podcast Disclaimer -->
  <div class="my-6 border-l-4 border-blue-400 bg-blue-50 p-4 dark:border-blue-400 dark:bg-blue-900/20">
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="ml-3">
        <p class="text-sm text-blue-700 dark:text-blue-300">
          <strong>🎧 Versão Podcast:</strong> Prefere escutar? Este post também está disponível em formato de áudio logo
          abaixo!
        </p>
      </div>
    </div>
  </div>
{% endif %}

<!-- Podcast Player -->
<div id="podcast-player" class="rounded-lg bg-gray-200 dark:bg-gray-600">
  <div class="shk-player" data-src="{{ page.audio }}"></div>
</div>

{% if page.cover_image %}
  <div class="flex justify-center">
    <img
      src="{{ site.url }}{{ page.cover_image }}"
      alt="Capa do post: {{ page.title }}"
      class="mt-1 mb-1 h-auto max-w-full rounded-lg object-cover shadow"
      loading="lazy"
    >
  </div>
{% endif %}

{{ content }}

{% if page.audio %}
  <script
    src="https://cdn.jsdelivr.net/npm/shikwasa@2.2.1/dist/shikwasa.min.js"
  ></script>
  <link
    href="https://cdn.jsdelivr.net/npm/shikwasa@2.2.1/dist/style.min.css"
    rel="stylesheet"
  >

  <script>
    const { Player } = window.Shikwasa;

    // Function to get inverted theme
    function getTheme() {
      const isDarkMode = document.documentElement.classList.contains('dark');
      return isDarkMode ? 'dark' : 'light';
    }

    // Initialize player with inverted theme
    const player = new Player({
      container: () => document.querySelector('.shk-player'),
      audio: {
        title: '{{ page.title }}',
        artist: 'Brasil em Números',
        src: '{{ page.audio }}',
      },
      fixed: {
        type: 'static',
      },
      theme: document.documentElement.classList.contains('dark') ? 'light' : 'dark',
    });

    // Track audio play events
    player.on('play', () => {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'audio_play', {
          audio_title: '{{ page.title | escape }}',
          audio_url: '{{ page.audio }}',
          page_url: window.location.href,
        });
      }
    });

    // Track audio pause events
    player.on('pause', () => {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'audio_pause', {
          audio_title: '{{ page.title | escape }}',
          audio_url: '{{ page.audio }}',
          page_url: window.location.href,
        });
      }
    });

    // Watch for theme changes and update player
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          const newTheme = getTheme();
          // Recreate player with new theme
          const container = document.querySelector('.shk-player');
          container.innerHTML = ''; // Clear container

          const newPlayer = new Player({
            container: () => container,
            audio: {
              title: '{{ page.title }}',
              artist: 'Brasil em Números',
              src: '{{ page.audio }}',
            },
            fixed: {
              type: 'static',
            },
            theme: newTheme,
          });

          // Re-add event listeners for the new player
          newPlayer.on('play', () => {
            if (typeof gtag !== 'undefined') {
              gtag('event', 'audio_play', {
                audio_title: '{{ page.title | escape }}',
                audio_url: '{{ page.audio }}',
                page_url: window.location.href,
              });
            }
          });

          newPlayer.on('pause', () => {
            if (typeof gtag !== 'undefined') {
              gtag('event', 'audio_pause', {
                audio_title: '{{ page.title | escape }}',
                audio_url: '{{ page.audio }}',
                page_url: window.location.href,
              });
            }
          });
        }
      });
    });

    // Start observing theme changes
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['class'],
    });
  </script>
{% endif %}

<div
  class="ss-box ss-circle ss-grow my-10 mb-10 text-center"
  data-ss-content="false"
  data-ss-social="share,facebook,twitter,linkedin,whatsapp,telegram,reddit,email"
  data-ss-icon-class="twitter:fab fa-x-twitter"
></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/assisfery/SocialShareJS@1.4/social-share.min.css">
<script src="https://cdn.jsdelivr.net/gh/assisfery/SocialShareJS@1.4/social-share.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/js/all.min.js"></script>

<script
  src="https://giscus.app/client.js"
  data-repo="brasilemnumeros/sitio"
  data-repo-id="R_kgDOPKkTgw"
  data-category="Announcements"
  data-category-id="DIC_kwDOPKkTg84Ctxve"
  data-mapping="title"
  data-strict="1"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="dark_dimmed"
  data-lang="pt"
  data-loading="lazy"
  crossorigin="anonymous"
  async
></script>
